<!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>my project</title>
        <link rel="stylesheet" href="../assets/css/reset.css">
        <link rel="stylesheet" href="../assets/css/main.css">
        <link rel="stylesheet" href="../assets/css/project.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    </head>
    <body>
        <div class="project_popup">
            <section class="header">
                <div class="h_top">
                    <span><img src="../assets/image/icon/picture_icon.png" alt="갤러리 아이콘"></span>
                    <!-- <p>file //파일 명</p> -->
                    <div class="all_btn">
                        <a href="../index.html"><button class="mini_btn"><span></span></button></a>
                        <a href="../index.html"><button class="max_btn"><span></span></button></a>
                        <a href="../index.html"><button class="close_btn"><span></span></button></a>
                    </div>
                </div>
                <div class="h_bot">
                    <ul>
                        <li>파일</li>
                        <li>EXIF</li>
                    </ul>
                    <span><img src="../assets/image/icon/pin_icon.png" alt="고정 아이콘"></span>
                </div>
            </section>

            <section class="main">
                <div class="swiper mySwiper">
                    <div class="swiper-wrapper">
                        <!-- <div class="swiper-slide">
                            <div class="info">
                                <dl class="name">
                                    <dt>프로젝트 이름:</dt>
                                    <dd>file //123</dd>
                                </dl>
                                <dl class="date">
                                    <dt>프로젝트 기간:</dt>
                                    <dd>date //123 ~ 123</dd>
                                </dl>
                                <dl class="comment">
                                    <dt>코멘트</dt>
                                    <dd>comment</dd>
                                </dl>
                            </div>
                                
                            <ul>
                                <li><img src="../assets/image/folder/file/no.webp" alt=""></li>
                            </ul>
                        </div> -->
                      
                        <div class="footer">
                            <div class="swiper-button-prev"></div>
                            <div class="swiper-button-next"></div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </body>
    <script>
        // data
        const jsonData =[
            {
                "file":"비상 수학 교과서",
                "image":[1,2,3,4,5,6,7,8,9],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":1
            },
            {
                "file":"미래엔 영어 교과서",        
                "image":[1,2,3,4,5,6],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":2
            },
            {
                "file":"천재 일본어 교과서",        
                "image":[1,2,3,4,5,6,7],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":3
            },
            {
                "file":"미래엔 디지털 초코",
                "image":[1,2,3,4,5,6,7,8,9],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":4
            },
            {
                "file":"비상 두두 ai 스픽온",        
                "image":[1,2,3,4,5,6,7,8,9],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":5
            },
            {
                "file":"비상 진도",
                "image":[1,2,3,4,5,6],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":6
            },
            {
                "file":"비상 두두 잉글리시 그래머",        
                "image":[1,2,3,4,5,6,7,8,9],
                "comment":"특이사항 없음",
                "date":"23.01.01 ~ 23.01.01",
                "no":7
            }
        ]



        jsonData.forEach((data,index) => {
            // 정보
            let info = document.createElement('div');
            info.setAttribute('class', 'info');
            
            let name = document.createElement('dl');
            let dt1 = document.createElement('dt');
            let dd1= document.createElement('dd');
            name.appendChild(dt1).innerText = "프로젝트 이름: ";
            name.appendChild(dd1).innerText = data.file;

            let date = document.createElement('dl');
            let dt2 = document.createElement('dt');
            let dd2= document.createElement('dd');
            date.appendChild(dt2).innerText = "프로젝트 기간: ";
            date.appendChild(dd2).innerText = data.date;

            let comment = document.createElement('dl');
            let dt3 = document.createElement('dt');
            let dd3= document.createElement('dd');
            comment.appendChild(dt3).innerText = "코멘트: ";
            comment.appendChild(dd3).innerText = data.comment;

            info.append(name);
            info.append(date);
            info.append(comment);

            //이미지
            let ul = document.createElement('ul');
            for (let i = 0; i < data.image.length; i++) {
                let li = document.createElement('li');
                let img = document.createElement('img');
                img.src = `../assets/image/folder/`+ data.file + `/`+ (i + 1)+`.webp`;

                ul.append(li)
                li.append(img);
            }

            // 전체 슬라이드
            let inner = document.createElement('div');
            inner.setAttribute("class", "inner");
            inner.append(info);
            inner.append(ul);

            let slide = document.createElement('div');
            slide.setAttribute("class", "swiper-slide");
            slide.setAttribute("id", data.no);
            slide.append(inner);

            let wrapper = document.querySelector('.main .swiper-wrapper');
            wrapper.append(slide);
           
        });

        let currentIndex = 0;
        let hTop = document.querySelector('.h_top');
        let fileName = document.createElement('p');
        hTop.append(fileName);
        function fileNameChangeFn(){
            fileName.innerText = `file // ` + jsonData[currentIndex].file + ` [` + jsonData[currentIndex].no + `/` + jsonData.length + `]`; 
        }
        
  
        //스와이퍼 슬라이드
        var swiper = new Swiper(".mySwiper", {
            speed:0,
            effect: "fade",
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
            on: {
                init:fileNameChangeFn(),
                slideChange: function () {
                    currentIndex = swiper.activeIndex;
                    fileNameChangeFn();
                }
            }
        });

        const params = new URLSearchParams(window.location.search);
        swiper.slideTo(params.get("slide") || 0, 0);

    </script>
</html>